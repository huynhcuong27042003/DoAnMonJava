<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security5"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"
            integrity="sha512-Tn2m0TIpgVyTzzvmxLNuqbSJH3JP8jm+Cy3hvHrW7ndTDcJ1w5mBiksqDBb8GpE2ksktFvDB/ykZ0mDpsZj20w=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <!--Self-written CSS-->
    <link href="css/styles.css" rel="stylesheet">
    <link href="css/userinfor.css" rel="stylesheet">
</head>
<body>
<!--User info-->
<section class="bg-gray-100 2xl:container" layout:fragment="content">
    <div class="flex w-5/6 mx-auto">
        <!--Sidebar-->
        <aside class="w-1/3" aria-label="Sidebar">
            <div class="p-2 px-3 py-4 overflow-y-auto rounded">
                <h1 class="mb-3 text-4xl font-medium">Xin chào bạn!</h1>
                <div class="w-full h-px mb-2 bg-gray-300"></div>
                <ul class="mt-1 space-y-2">
                    <li>
                        <a th:href="@{/userinfor/update/{id}(id=${tk.getEmail()})}"
                           class="flex items-center p-2 text-lg text-gray-700 font-base hover:bg-gray-50">
                            <i class="ri-user-3-line"></i>
                            <span class="ml-3">Tài khoản của tôi</span>
                        </a>
                    </li>
                    <div class="w-full h-px bg-gray-200"></div>
                    <li>
                        <a th:href="@{/userinfor/changepassword/{id}(id=${tk.getEmail()})}" class="flex items-center p-2 text-lg text-gray-500 font-base hover:bg-gray-50">
                            <i class="ri-lock-line"></i>
                            <span class="ml-3">Đổi mật khẩu</span>
                        </a>
                    </li>
                    <div class="w-full h-px bg-gray-300"></div>
                    <li>
                        <a href="#" class="flex items-center p-2 text-lg text-gray-500 font-base hover:bg-gray-50">
                            <i class="ri-motorbike-line"></i>
                            <span class="ml-3">Xe đã thuê</span>
                        </a>
                    </li>
                    <div class="w-full h-px bg-gray-300"></div>
                    <li>
                        <div class="flex items-center p-2 text-lg text-gray-500 font-base hover:bg-gray-50">
                            <i class="ri-arrow-left-line"></i>
                            <form th:action="@{/logout}" method="post">
                                <button type="submit" class="ml-3">
                                    Đăng xuất
                                </button>
                            </form>
                        </div>
                    </li>
                </ul>
            </div>
        </aside>
        <!--Content-->
        <div class="w-2/3">
            <form th:action="@{/userinfor/update/{id}(id=${tk.email})}" th:object="${tk}" method="post" class="flex mt-2 mb-3 bg-white rounded-lg shadow-lg" enctype="multipart/form-data">
                <div class="flex flex-col items-center justify-center w-1/3 pl-4 mt-8 text-center">
                    <h1 class="text-2xl font-medium">Thông tin tài khoản</h1>
                    <div class="block mx-auto mt-4">
                        <img th:src="@{/images/{imageName}(imageName=${tk.getAvarta()})}" id="profile-image" src="https://via.placeholder.com/200" alt="Ảnh người dùng"
                             class="ml-10 rounded-full shadow-lg cursor-pointer hover:opacity-80"
                             style="width: 140px; height: 140px;">
                        <input id="image-upload-profile" type="file" name="image" class="hidden"
                               onchange="handleImageUpload(event)">
                               onchange="handleImageUpload(event)">
                        <div class="flex mt-6 mb-3">
                            <h4 th:text="*{tenNguoiDung}" id="name-display" class="w-48 h-8 text-xl font-semibold">Nguyễn Quốc Huy</h4>
                            <input id="name-input" type="text" th:field="*{tenNguoiDung}"
                                   class="hidden w-48 h-8 text-xl font-semibold border rounded outline-none appearance-none">
                            <i class="ml-2 text-xl cursor-pointer ri-pencil-line"
                               onclick="toggleEdit('name-display', 'name-input')"></i>
                        </div>
                    </div>
                </div>
                <div class="relative w-2/3">
                    <div class="w-11/12 p-6 mt-20 mr-3 bg-gray-100 rounded-lg shadow-lg h-36">
                        <div class="flex items-center justify-between mb-4">
                            <span class="text-gray-500">Ngày sinh</span>
                            <div class="cursor-pointer">
                    <span th:if="${tk.ngaySinh != null}" th:text="${tk.getNgaySinh()}"
                          id="birthdate-display" class="font-semibold"
                          onclick="toggleEdit('birthdate-display', 'birthdate-input')"></span>
                                <span th:unless="${tk.ngaySinh != null}"
                                      id="birthdate-display" class="font-semibold"
                                      onclick="toggleEdit('birthdate-display', 'birthdate-input')">----/--/--</span>
                                <input id="birthdate-input" type="date" th:field="*{ngaySinh}"
                                       class="hidden px-3 py-2 ml-2 text-gray-700 border rounded-lg shadow-lg outline-none"
                                       placeholder="Enter birthdate">
                                <i class="ml-2 ri-pencil-line"
                                   onclick="toggleEdit('birthdate-display', 'birthdate-input')"></i>
                            </div>
                        </div>
                        <div class="flex items-center justify-between mt-4">
                            <span class="text-gray-500">Giới tính</span>
                            <div class="cursor-pointer">
                    <span id="gender-display" class="font-medium text-black"
                          onclick="toggleEdit('gender-display', 'gender-input')">Nam</span>
                                <select id="gender-input"
                                        class="hidden px-3 py-2 ml-2 text-gray-700 border rounded-lg shadow-lg outline-none">
                                    <option>Nam</option>
                                    <option>Nữ</option>
                                    <option>Khác</option>
                                </select>
                                <i class="ml-2 ri-pencil-line"
                                   onclick="toggleEdit('gender-display', 'gender-input')"></i>
                            </div>
                        </div>
                    </div>
                    <div class="w-11/12 mt-6">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center">
                                <span class="text-gray-500">Số điện thoại</span>
                            </div>
                            <div class="flex items-center cursor-pointer">
                                <input th:field="*{SDT}" type="text" placeholder="Cập nhập số điện thoại" id="phone" name="SDT"
                                       class="w-full px-3 py-2 mr-3 leading-tight text-gray-700 border rounded shadow-lg outline-none appearance-none">
                                <i class="ri-pencil-line" onclick="focusInput('phone')"></i>
                            </div>
                        </div>
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <span class="text-gray-500">Địa chỉ</span>
                            </div>
                            <div class="flex items-center cursor-pointer">
                                <input th:field="*{diaChi}" type="text" placeholder="Cập nhật địa chỉ" id="diachi" name="DiaChi"
                                       class="w-full px-3 py-2 mr-3 leading-tight text-gray-700 border rounded shadow-lg outline-none appearance-none">
                                <i class="ri-pencil-line" onclick="focusInput('diachi')"></i>
                            </div>
                        </div>
                    </div>
                    <button
                            class="p-2 mt-10 mb-4 mr-12 text-white bg-blue-400 rounded-lg shadow-xl float-end hover:bg-blue-500">Sửa
                        đổi</button>
                </div>
            </form>
            <form th:action="@{/userinfor/updateGPLX/{id}(id=${tk.email})}" th:object="${tk}" method="post" class="flex mt-2 bg-white rounded-lg shadow-lg">
                <div class="w-1/2 pl-4 mt-4 mb-3 ml-8">
                    <div class="flex items-center">
                        <h1 class="mx-1 text-xl font-medium">Giấy phép lái xe</h1>
                    </div>
                    <h1 class="mx-1 mt-6 mb-5 text-base font-medium">Hình ảnh</h1>
                    <img id="car-license-image" src="/images/lisence.jpg" alt="Ảnh người dùng"
                         class="rounded-md shadow-lg hover:opacity-80"
                         style="width: 395px; width: 290px;">
                </div>
                <div class="relative flex flex-col items-center justify-between w-1/2 mb-3">
                    <h1 class="mx-1 mt-16 mb-5 text-base font-medium">Thông số chung</h1>
                    <div class="w-full mb-4 mr-6">
                        <label for="gplx" class="block mb-2 font-bold text-gray-700">Số GPLX</label>
                        <input th:field="*{GPLX}" type="text" placeholder="Nhập số GPLX đã cấp"
                               class="w-full px-3 py-2 mr-3 leading-tight text-gray-700 border rounded shadow-lg outline-none appearance-none">
                    </div>
                    <div class="w-full mb-4 mr-6">
                        <label for="fullname" class="block mb-2 font-bold text-gray-700">Họ và tên</label>
                        <input th:value="${tk.tenNguoiDung}" type="text" placeholder="Nhập đầy đủ họ tên"
                               class="w-full px-3 py-2 mr-3 leading-tight text-gray-700 border rounded shadow-lg outline-none appearance-none" disabled>
                    </div>
                    <button type="submit"
                            class="px-4 py-3 text-white bg-green-400 rounded-lg shadow-xl ml-72 hover:bg-green-500">
                        Cập nhật
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>
</body>

<script src="https://cdn.jsdelivr.net/npm/dayjs@1.10.7/dayjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dayjs@1.10.7/plugin/advancedFormat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dayjs@1.10.7/plugin/isSameOrBefore.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dayjs@1.10.7/plugin/isSameOrAfter.js"></script>
<!--Self-written JS-->
<script src="/js/index/dropdown.js"></script>
<script src="/js/index/input.js"></script>
</html>